<hr>

:warning: **The maintenance and support of this project has been moved to a [new repository](https://github.com/Spellhold-Studios/Hubelpot-NPC).**

<hr><br>

![Latest Release](https://img.shields.io/github/v/release/SpellholdStudios/Hubelpot_the_Vegetable_Merchant_NPC?include_prereleases&color=darkred)<a name="top" id="top">
![GitHub (Pre-)Release Date](https://img.shields.io/github/release-date-pre/SpellholdStudios/Hubelpot_the_Vegetable_Merchant_NPC?color=gold)
![Platform](https://img.shields.io/static/v1?label=platform&message=windows%20%7C%20Mac%20%7C%20linux&color=informational)
![Language](https://img.shields.io/static/v1?label=language&message=English&color=limegreen)

<div align="center"><h1></a>Hubelpot the Vegetable Merchant NPC Mod</h1>

<h3>A mod hosted at Spellhold Studios for Baldur's Gate II:ToB,<br>
Baldur's Gate Trilogy, BG2:EE and EET<h3>

</div><br>


**Authors:** Robert Dorf (aka BobTokyo) and Sebastian Conrad (SConrad)  
**Mod Website:** <a href="http://www.spellholdstudios.net/ie/hubelpot">Spellhold Studios</a>  
**Mod Forum:** <a href="http://www.shsforums.net/forum/156-hubelpot/">Hubelpot the Vegetable Merchant</a><br>

[![Created Badge](https://badges.pufler.dev/created/SpellholdStudios/Hubelpot_the_Vegetable_Merchant_NPC?style=plastic)](https://badges.pufler.dev)
![GitHub repo size](https://img.shields.io/github/repo-size/SpellholdStudios/Hubelpot_the_Vegetable_Merchant_NPC?style=plastic)
[![Visits Badge](https://badges.pufler.dev/visits/SpellholdStudios/Hubelpot_the_Vegetable_Merchant_NPC?color=cyan&style=plastic)](https://badges.pufler.dev) 
![Maintenance](https://img.shields.io/static/v1?label=maintained%3F&message=yes&color=greenlight&style=plastic)
![GitHub contributors](https://img.shields.io/github/contributors/SpellholdStudios/Hubelpot_the_Vegetable_Merchant_NPC?color=blueviolet&style=plastic) [![Contributors Display](https://badges.pufler.dev/contributors/SpellholdStudios/Hubelpot_the_Vegetable_Merchant_NPC?size=30&padding=5&bots=true)](https://badges.pufler.dev)

## 

[Read the mod's readme](https://spellholdstudios.github.io/readmes/hubelpot-readme-english.html)

[Download the mod at Spellhold Studios](http://www.shsforums.net/files/file/31-hubelpot-the-vegetable-merchant/)<br>

## 

<div align="center">
<a href="#intro">Overview</a> &#x2B25; <a href="#compat">Compatibility</a> &#x2B25; <a href="#installation">Installation</a> &#x2B25; <a href="#components">Components</a> &#x2B25; <a href="#credits">Credits</a> &#x2B25; <a href="#versions">Version History</a></br>
</div>

<hr>

## <a name="intro" id="intro"></a>Overview

<img style="float: left;" src="hubelpot/readme/images/sc_hubm.jpg"> This mod adds the Vegetable Merchant Hubelpot Thistledown to the game. He is a joinable druid-NPC. You can find him in Enge's fruit and vegetable shop in Waukeen's Promenade (he’s leasing the space).<br>
Hubelpot is by default a Totemic Druid. The village wise man who can call spirits to aid his people is well established in folkloric tradition, and fits Hubelpot well enough. He also has two kit options: the Village Druid for those who want something a bit different, and the Vegetable Farmer for those who want a powerful kit with high comic relief value. Both of the new kits are NPC only, and both are fairly well-balanced compared to other BG2 kits.<br>
Hubelpot features around 30 banters, none of them breaking the 4th wall, and none of them featuring the word "turnip". He interacts with every Bioware NPC except Sarevok. In ToB he’s still fairly quiet, only speaking up when called, with Volo and at the end of ToB; he does have an epilogue. If there is an expansion, more ToB dialog will be added.<br>
From a play value point of view, Hubelpot adds one quest with an unusual reward. As a single class druid with a unique item and a few kit options, he starts off able to survive and contribute and will be roughly as powerful as most of the Bioware NPCs by the end of the game.<br><br>

<details><summary><ins>Original note from the authors</ins></summary>
<p>

###### Hubelpot started out as a joke, turned into a one day NPC, then a one week NPC, and is now an NPC project. Let this be a lesson to all of you never, ever to tell a joke under any circumstances, ever.
###### The challenge was to create an NPC free from tainted blood, dark secrets, mental illness, etc, etc. The NPC would not step on CHARNAME's lines, would not be a power-gamer's dream, and would be fun to have in the party. What we came up with was Hubelpot.


###### We hope you'll like him.


<em>Disclaimer: Hubelpot is not a tool of the devil. Hubelpot is not now nor has he ever been a communist. Hubelpot is not down with his bad self. Hubelpot is not the walrus. He is the vegetable man.</em>
</p>
</details><br>
<div align="right"><a href="#top">Back to top</a></div>


<hr>


## <a name="compat" id="compat"></a>Compatibility

#### Games supported

This mod is designed to work on the following Infinity Engine games: the original Baldur's Gate II (BG2, or just SoA) with or without the Throne of Bhaal (ToB) expansion, Baldur's Gate II: Enhanced Edition (BG2:EE), the conversion projects <a href="http://www.shsforums.net/forum/261-bgt-weidu/">Baldur's Gate Trilogy (BGT)</a> and <a href="https://github.com/K4thos/EET/releases">Enhanced Edition Trilogy (EET)</a>.

## 

#### Other Mods Compatibility

Hubelpot is a WeiDU mod, and therefore should be compatible with all WeiDU mods. Though we are striving to make Hubelpot compatible with as many other mods as possible, there is always a chance that incompatibilities will arise. As it has not yet been thoroughly tested without the ToB expansion, we cannot be sure whether the effects used by any of our custom spells or items require ToB. If you encounter any bugs, please <a href="">report them on the forum!</a>

## 

#### Installation Order

>Although it is not required for Hubelpot the Vegetable Merchant to function properly, classical game players are strongly recommended to download and install the latest version of the <a href="https://www.gibberlings3.net/mods/fixes/bg2fixpack/">BG2 Fixpack</a> before proceeding with the installation of this mod.<br>

- Please install Hubelpot after BG2 Fixpack and EET.
- Please install Hubelpot before EET_end.
<div align="right"><a href="#top">Back to top</a></div>


<hr>


## <a name="installation" id="installation"></a>Installation

#### Notes

*If you've previously installed the mod, remove it before extracting the new version. To do this, run __`setup-hubelpot.exe`__, un-install all previously installed main component and delete the :file_folder: __hubelpot__ folder.*

*When installing or un-installing, __do not close the DOS window__ by clicking on the __X__ button! Instead, press the __Enter__ key whenever instructed to do so.*

*__Disable any antivirus__ or other memory-resident software before installing this or any other mod. Some (particularly avast and Norton!) have a tendency to report false positives with mod activity, resulting in failed installs.*

## 

#### Enhanced Editions Note

The Enhanced Editions are actively supported games. Please note that every patch update will wipe your current mod setup! If in the middle of a modded game you might want to delay the patch update (if possible) as even after reinstalling the mods, you might not be able to continue with your old savegames. Alternatively, copy the whole game's folder into a new one that can be modded and will stay untouched by game patches. It is important that you install the mod to the language version you are playing the game in. Otherwise, the dialogues of the mod will not show but give error messages.

## 

#### Windows

Hubelpot for Windows is distributed as an extractable compressed archive and includes a WeiDU installer.

Extract the contents of the mod archive into the folder of the game you wish to modify (*the folder which contains the "CHITIN.KEY" file*), using <a href="https://www.7-zip.org/download.html">7zip</a>, <a href="https://www.rarlab.com/download.htm">WinRAR</a>, or another file compression utility that handles .zip files. On successful extraction, there should be a :file_folder: hubelpot folder and a setup-hubelpot.exe file in your game folder. To install, simply double-click **`setup-hubelpot.exe`** and follow the instructions on screen.

Run **`setup-hubelpot.exe`** in your game folder to reinstall, un-install or otherwise change the components settings.

## 

#### Mac OS X

Hubelpot for Mac OS X is distributed is distributed in the same compressed archive and includes a WeiDU installer.

First, extract the files from the archive into your game directory. On successful extraction, there should be a :file_folder: hubelpot folder, setup-hubelpot and setup-hubelpot.command files in your game folder. To install, simply double-click **`setup-hubelpot.command`** and follow the instructions on screen.

Run **`setup-hubelpot.command`** in your game folder to reinstall, un-install or otherwise change the components settings.

## 

#### Linux

Hubelpot for Linux is distributed in the same compressed archive and does not include a WeiDU installer.

Extract the contents of the mod to the folder of the game you wish to modify.

Download the latest version of WeiDU for Linux from <a href="https://github.com/WeiDUorg/weidu/releases">WeiDU.org</a> and copy weidu and weinstall to /usr/bin. Following that, open a terminal, **`cd`** to your game installation directory, run tolower and answer 'Y' to both queries. You can avoid running the second option (linux.ini) if you've already ran it once in the same directory. To save time, the archive is already tolowered, so there's no need to run the first option (lowercasing file names) either if you've extracted only this mod since the last time you lowercased file names. If you're unsure, running tolower and choosing both options is the safe bet.

To install, run **`weinstall setup-hubelpot`** in your game folder. Then run **`wine bgmain.exe`** (or **`wine baldur.exe`** for EE games) and start playing.

## 

#### Note for Complete Un-installation

In addition to the methods above for removing individual components, you can completely un-install the mod using **`setup-hubelpot --uninstall`** at the command line to remove all components without wading through prompts.</br>
<div align="right"><a href="#top">Back to top</a></div>


<hr>


## <a name="components" id="components"></a>Components

The installer includes the following components. The number of each is the component *`DESIGNATED`* number which gives it a fixed install position and allows automated installers to specify component choices.


## 

#### [0-2] Hubelpot Thistledown, the Vegetable Merchant NPC mod
&nbsp;&nbsp;&nbsp;**[0]** Hubelpot is a Totemic Druid (by default)<br>
&nbsp;&nbsp;&nbsp;**[1]** Hubelpot is a Village Druid (Druidic kit)<br>
&nbsp;&nbsp;&nbsp;**[2]** Hubelpot is a Vegetable Farmer (Druidic kit)<br><br>

&#10173; This main component adds the Vegetable Merchant Hubelpot Thistledown to the game. He is by default a Totemic Druid, but has two kit options: the Village Druid for those who want something a bit different, and the Vegetable Farmer for those who want a powerful kit with high comic relief value.

## 

#### [10] Alternate Portrait by Enkida

&#10173; This optional component replaces Hubelpot portraits with Endika alternate one<br>.

<div align="center">
<img src="hubelpot/readme/images/sc_hubm2.jpg">
</div>
<div align="right"><a href="#top">Back to top</a></div>


<hr>


## <a name="credits" id="credits"></a>Credits and Acknowledgements

&#9755; For support or questions, please visit the <a href="http://www.shsforums.net/forum/156-hubelpot/">mod forum</a>.

## 

**Authors:** Robert Dorf (aka <a href="http://www.shsforums.net/user/2433-bobtokyo/">BobTokyo</a>) and Sebastian Conrad (aka <a href="http://www.shsforums.net/user/2832-sconrad/">SConrad</a>)

## 

#### Special Acknowledgements to:

- <a href="http://www.spellholdstudios.net/">Spellhold Studios</a> team for hosting the mod (<a href="http://www.shsforums.net">Forums</a>).
- Main Writers: BobTokyo, Domi, MajorTomSawyer, Beyshaliban, NotMrT.
- Proofreading, Ideas and General Guidance: Beyshaliban, Domi, Morning Glory, SConrad, Thrain, NotMrT.
- Art and graphics: Sir-Kill, Khayman and Sol Ek.
- Voice Actors: NotMrT.
- Bug Hunting: SConrad, BobTokyo, NotMrT, Shed.
- Special Thanks to Terry Pratchett, a god among authors, and Heather Wood, multi-talented folk songstress, for inspiration. For several versions of The Hedgehog Song and much more, please go <a href="http://www.ie.lspace.org/">here</a>.
- <a href="http://www.shsforums.net/topic/55298-hubelpot-20-beta-sample-banters/">Bookwyrme</a> for writing Minsc, Nalia and Sarevok.
- Austin for Russian translation.
- Gwendolyne and Austin for updating the mod to v2.0.0.
- <a href="https://www.deviantart.com/enkida/art/BG2-NPC-Hubelpot-283673389">Hupelpot alternate portrait</a>: Enkida.
- The team leaders also wish to credit everyone not mentioned who've contributed with ideas, suggestions, help, response and encouragement. This has meant a lot to us. Hubelpot wouldn't exist if it weren't for you. Thank you!.
- Everyone else from <a href="https://www.gibberlings3.net/forums/">The Gibberlings Three</a>, <a href="http://www.shsforums.net/">Spellhold Studios</a> forums, and the other Infinity Engine gaming and modding communities who offered their help and support.
- Deprecated links: <a href="http://forums.forgottenwars.net/index.php?showforum=156">Hubelpot's own forum</a> at <a href="http://forums.forgottenwars.net">Forgotten Wars forums</a> and <a href="http://sol-ek-sa.forgottenwars.net">Sol Ek</a> at <a href="http://forums.forgottenwars.net/index.php?showforum=147">FW</a>.

&#9755; If you wish to translate the mod, have a suggestion, or should encounter any bugs, please report them to the maintainers at the <a href="http://www.shsforums.net/forum/156-hubelpot/">mod forum</a>.</br>

## 

#### Programs/tools used in creation

- <a href="https://github.com/WeiDUorg/weidu/releases">WeiDU</a>, by Wes Weimer, the bigg and Wisp.
- <a href="https://github.com/Argent77/NearInfinity/releases">Near Infinity</a>, by Jon Olav Hauglid, FredSRichardson, and Argent77.
- <a href="http://www.shsforums.net/topic/31285-infinity-explorer-v085/">Infinity Explorer</a>, by Dmitry Jemerov / bigmoshi.
- <a href="https://gibberlings3.github.io/iesdp/">IESDP</a>, maintained by igi and lynx.
- <a href="http://www.gibberlings3.net/tools/dltcep.php">DLTCEP</a>, by Avenger.
- <a href="http://www.baldursgatemods.com/forums/index.php?action=downloads;sa=view;down=85">CreMaker_v3.1.9</a>.
- <a href="http://www.baldursgatemods.com/forums/index.php?action=downloads;sa=view;down=68">BAM Workshop</a>, by Glenn Flansburg.
- Sir-Kill's graphic programs: Jasc PaintShopPro 8.
- <a href="http://notepad-plus-plus.org/">Notepad++</a>, by the Notepad++ team, Don Ho, and the spellcheck plug-in.
- <a href="http://www.shsforums.net/files/file/1048-weidu-highlighter-for-notepad/">WeiDU Notepad++ Highlighters</a>, by Argent77.
- <a href="https://www.filecroco.com/download-context/">ConTEXT Text Editor</a>, by Eden Kirin.
- <a href="https://www.gibberlings3.net/mods/tools/weidu/">WeiDU ConTEXT Highlighters </a>, by Idobek, updated by cmorgan.
- <a href="https://forums.beamdog.com/discussion/78364/infinity-auto-packager-automatically-generate-and-adds-mod-packages-to-release-when-you-publish-it">Infinity Auto Packager</a>, by AL|EN.

## 

#### Copyrights Information

###### Hubelpot is not developed, supported, or endorsed by BioWare&trade; or Interplay/BlackIsle, Overhaul, Beamdog or the Wizards of the Coast. It was developed by Robert Dorf and Sebastian Conrad, based on material from the game Baldur's Gate II and its expansion.
###### All mod content is &copy;Robert Dorf and Sebastian Conrad.
###### Baldur's Gate II: Shadows of Amn and Baldur's Gate II: Throne of Bhaal &copy; TSR, Inc. The BioWare Infinity Engine is &copy; BioWare Corp. All other trademarks and copyrights are property of their respective owners.

###### This mod was created to be freely enjoyed by all Baldur's Gate II players, and its content is free of rights. However, it should not be sold, published, compiled or redistributed in any form without the consent of the author.

###### The modding community for the Infinity Engine has been going strong for more than 10 years now, and is the culmination of thousands of unpaid modding hours by fellow fans of the game. Modders produce their best work and players get the best, well-supported mods when we all work together.
###### There are two big ways to upset this harmony. One is to claim someone else's work as your own. The second is to host and redistribute a mod without permission from the author.
###### Be kind to your fellow players and modders. Don't do either.</br></br>
<div align="right"><a href="#top">Back to top</a></div>


<hr>


## <a name="versions" id="versions"></a>Version History

##### Version 2.1.0 &nbsp;(February 21, 2021)

- Fixed a typo in `HANDLE_CHARSETS` arrays.
- Added Minsc, Nalia and Sarevok banters written by <a href="http://www.shsforums.net/topic/55298-hubelpot-20-beta-sample-banters/">Bookwyrme</a>, but never included into the mod.
- *sc#hubquest.d*: fixed a bug preventing Fanny Adams to initiate dialog and preventing from completing Hubelpot's quest.
- Added Russian translation (by Austin).

## 

##### Version 2.0.0 &nbsp;(February 10, 2021)

- Added *hubelpot.ini* metadata file (including Dynamic Install Syntax) to support AL|EN's "Project Infinity".
- Renamed *Setup-Hubelpot.tp2* -> *hubelpot.tp2* and moved it into mod top folder to support AL|EN's "Project Infinity".
- Replaced `AUTHOR` keyword with `SUPPORT`.
- Added `VERSION` flag.
- Added `README` command.
- Added `HANDLE_CHARSETS` function to convert string entries for EE games (to prepare for possible translations).
- Added `REQUIRE_PREDICATE` process to avoid installing the mod in inaccurate games.
- Added components `DESIGNATED` numbers and "*hubelpot_npc_totemic_druid*", "*hubelpot_npc_village_druid*", "*hubelpot_npc_vegetable_farmer*" and "*hubelpot_npc_alternate_portrait*" `LABELS`.
- Externalized tp2 code into *main_component.tpa* library for more comfortable readability and maintenance.
- Commented code as much as possible.
- Added native BG2:EE and EET compatibility.
- Rewrote install procedure to use WeiDU's built-in `HANDLE_AUDIO` function.
- Made the three available kits subcomponents of the main component: Re-enabled the Vegetable Farmer kit (disabled as of version 1.0). :wink:
- Added a brand new optional component to install an <a href="https://www.deviantart.com/enkida/art/BG2-NPC-Hubelpot-283673389">alternate portrait from Enkida</a> (thanks Austin!).
- Converted inventory BAMs to EE: This feature attempts to modify traditional inventory BAMs so that both the large and small icons are utilized by the EE games. The inventory BAM must have two sequences, the first containing the "large" inventory icon frame and the second containing the "small" inventory icon frame to be processed. Inventory icon BAMs in the bam folder that meet these requirements are patched and saved back to the *override* folder.
- Fixed bam files: fixed frames coordinates and palettes.
- Kits:
  - Re-enabled and fixed all optional Druidic kits.
  - `ADD_KIT` process: added missing lower kit strref.
  - Spell and item abilities: fixed wrong opcode settings when accurate (Timing mode: *Delay/Permanent* replaced with *Instant/Permanent until death*. Dispel/Resistance: *Not dispel/Bypass resistance* replaced with *Natural/Nonmagical*...).
- Included all BWP Fixpack patches:
  - *sc#ar0500.baf*: <a href="http://www.shsforums.net/topic/9831-bug-reports-please-post-here/page-5#entry546504">Lollorian's fix for double creation of Inspector</a>.
  - *sc#ar0530.baf* and *sc#hubquest.d*: <a href="http://www.shsforums.net/topic/42220-fixes-for-the-big-fixpack/page-10#entry482945">Lollorian's GLOBAL variable fixes</a> reported <a href="http://www.shsforums.net/topic/9831-bug-reports-please-post-here/page-5#entry482947">here</a>.
  - *bsc#hub.d*: included SConrad fixes <a href="http://www.shsforums.net/topic/9831-bug-reports-please-post-here/#entry137077">to fire dialogs</a> and <a href="http://www.shsforums.net/topic/9831-bug-reports-please-post-here/page-2#entry140124">Edwin banter</a>, plus Austin fixes that 1) solve wrong variable checking preventing right banters with <a href="http://www.shsforums.net/topic/9831-bug-reports-please-post-here/#entry138899">Minsc</a>, Anomen, and Edwin to be fired, 2) fix <a href="http://www.shsforums.net/topic/16633-is-this-a-bug-have-hubelpot-installed/#entry217591">compatibility with the Edwin Romance mod</a>.
  - Lollorian's assorted CRE fixes.
- *FATESP.dlg*: replaced the buggy dialog update process (`REPLACE_TEXTUALLY`) with a more elegant one that actually displays the strref related to Hubelpot Druidic Kit, which solves this <a href="http://www.shsforums.net/topic/34068-problems-installing/#entry515226">annoying bug</a>. Now, Hubelpot recall will be displayed before Imoen.
- *sc#hubquest.d*: included Austin fix to solve <a href="http://www.shsforums.net/topic/9831-bug-reports-please-post-here/page-3#entry141647">the bug when gold could remain in the inventory after the quest</a> (added `TakePartyItem("SC#HuGl")` action).
- *sc#hub25.d*: included Austin fix to solve <a href="http://www.shsforums.net/topic/9831-bug-reports-please-post-here/page-2#entry140470">a dialog bug with Solar in the Pocket plane</a> by renaming *SC#Hub25J.d* to *SC#Hb25J.d*.
- Fixed possible incompatibilities with other mods also patching AR0707 script: included <a href="http://www.shsforums.net/topic/56342-hubelpot-and-ar0707-possible-incompatibilities/">Argent77's fix</a>. Moreover, AR0707.bcs will always be patched in addition to whatever the script of AR0707.are is called.
- *pdialog.2da* and *interdia.2da*: fixed wrong dialogue names (9 characters) that were appended (replaced SC#Hub25D, SC#Hub25J, SC#Hub25P and BSC#Hub25 with SC#Hb25D, SC#Hb25J, SC#Hb25P and BSC#Hb25).
- No longer overwrites *demmag.cre* (Dracandros), but patches it with  WeiDU's built-in `ADD_CRE_ITEM` function, and removes AR0530.bcs patch.
- Provided Hubelpot portraits for EE games, and fixed classic medium portrait.
- Appended *tooltip.2da* whenever relevant.
- Proofread strrefs (Gwendolyne).
- Fixed token typos: replaced *`<LADYLORD>`* with *`<PRO_LADYLORD>`* to fix the bug with incorrect gender reference to `<CHARNAME>` if another NPC started the dialog (Austin).
- Updated *setup.tra* file for compatibility with `GW_UPDATE_ITM_DESCRIPTION_TO_EE` WeiDU function requirements which automatically removes usability restrictions for EE games.
- Mod Traified. Feel free to provide me with translations. I will include them as soon as possible.
- Updated deprecated modding tools links.
- Re-formated, updated and renamed readme file to *hubelpot-readme-english.html*, then moved it into new "*readme*" folder.
- Removed useless files and backup folder.
- Renamed "*sc#hub*" top-folder to "*hubelpot*" and reorganized mod architecture tree: created folders to sort files according to their types.
- Lower cased files.
- Included Linux and Mac Os X versions in the same package (thanks AL|EN's Infinity Auto Packager tool!).
- Updated OggDec to v1.9.7 and added sox v14.4.1 for Mac.
- Added archive libiconv-1.9.2-1-src.7z with iconv licence info.
- Updated WeiDU installer to v247.
- Uploaded mod to official Spellhold Studios GitHub mirror account.

## 

##### Version SC#IM6 &nbsp;(2018)

- Bug fixes and Vegetable Merchant kit rewritten.

## 

##### Version 1.0 beta &nbsp;(April 26, 2007)

- Initial release.
<div align="right"><a href="#top">Back to top</a></div>

